var MAF_CROSS=[];function mafcross(t){Array.isArray(t)&&(MAF_CROSS=t),("string"==typeof t||t instanceof String)&&(MAF_CROSS=[t])}!function(){"use strict";var t,e={COOKIE_MAX_LENGTH:2e3,COOKIE_ELEMENT_DELIMITER:"-",COOKIE_KEYVALUE_DELIMITER:"_",COOKIE_VALUEPARTS_DELIMITER:".",c_prefix:"MDK_",c_expires:365,param_key:"maf"},n={_config:{},set config(t){this._config=t},_cookieName:function(){return this._config.c_prefix+this._config.param_key},_getMaftagUrlParam:function(){var t=this._config.param_key,e=function(){var t=location.search.substring(1),e=[];if(t)for(var n=t.split("&"),i=0;i<n.length;i++){var o=n[i].split("=");e[o[0]]=o[1]}return e}();return!!e.hasOwnProperty(t)&&e[t]},_validateNumber:function(t){return void 0!==t&&-1!==t.search(/^[0-9]+$/)},_validateMaftagUrlParam:function(){var t=this._getNewValue(),e=this._getPromotionArray(t);if(e.length<=0)return!1;for(var n=0;n<e.length;n++){var i=e[n].split(this._config.COOKIE_KEYVALUE_DELIMITER);if(i.length<2||!this._validateNumber(i[0]))return!1;i=this._splitMafCookie(i[1]);if(!(this._validateNumber(i[0])&&this._validateNumber(i[1])&&this._validateNumber(i[4])&&this._validateNumber(i[5])))return!1}return!0},_splitMafCookie:function(t){var t=t.split(this._config.COOKIE_VALUEPARTS_DELIMITER),e=t.shift(),n=t.shift(),i=t.shift(),o=t.pop(),a=t.pop();return[e,n,i,t.join("."),a,o]},_getOldCookie:function(){return o(this._cookieName())},_getOldStorage:function(){return a(this._cookieName())},_getNewValue:function(){return decodeURIComponent(this._getMaftagUrlParam())},_getPromotionArray:function(t){return t?t.split(this._config.COOKIE_ELEMENT_DELIMITER):[]},_getValuePromotionId:function(t){t=t.split(this._config.COOKIE_KEYVALUE_DELIMITER);return t[0]||!1},_getPromotionIds:function(t){var e,n,i=[];for(e in t)!t.hasOwnProperty(e)||(n=this._getValuePromotionId(t[e]))&&i.push(n);return i},_getOldPromotionIds:function(){var t=this._getPromotionArray(this._getOldCookie());return this._getPromotionIds(t)},_getValuePromotionIds:function(t){t=this._getPromotionArray(t);return this._getPromotionIds(t)},_getSettingPromotionIds:function(t,e){var n=this._getValuePromotionIds(t),i=this._getValuePromotionIds(e);if(0<i.length)for(var o=0;o<i.length;o++){var a=n.indexOf(i[o]);-1!==a&&delete n[a]}return t&&t.length>this._config.COOKIE_MAX_LENGTH&&n.shift(),n},_getSettingValue:function(t,e){var n,i,o="",a=this._getPromotionArray(t),r=this._getSettingPromotionIds(t,e);for(n in a)!a.hasOwnProperty(n)||(i=a[n].split(this._config.COOKIE_KEYVALUE_DELIMITER))[0]&&-1!==r.indexOf(i[0])&&(o&&(o+=this._config.COOKIE_ELEMENT_DELIMITER),o+=a[n]);return o&&(o+=this._config.COOKIE_ELEMENT_DELIMITER),o+=e},_getSettingCookie:function(){return this._getSettingValue(this._getOldCookie(),this._getNewValue())},_getSettingStorage:function(){return this._getSettingValue(this._getOldStorage(),this._getNewValue())},setMaftagCookie:function(){if(0===Object.keys(this._config).length)return!1;var t,e,n,i,o,a;this._validateMaftagUrlParam()&&(e=this._getSettingCookie())&&(t=this._cookieName(),e=e,n=this._config.c_expires,t&&e&&(i=(new Date).getTime(),i=new Date(i+864e5*n).toUTCString(),o=function(t){if(!t)return!1;t=t.match(/^(.*?)([a-z0-9][a-z0-9\-]{1,61}[a-z0-9]\.[a-z.]{2,6})[:[0-9]*]?([/].*?)?$/i);return null!==t&&"."+t[2]}(document.domain),a="",a=(a+=t+"="+encodeURIComponent(e)+";")+" domain="+o+"; path=/;",n&&(a+=" expires="+i+";"),a+=" SameSite=lax;",document.cookie=a))},setMaftagStorage:function(){return 0!==Object.keys(this._config).length&&(!!function(){try{return localStorage.setItem("x","x"),localStorage.removeItem("x"),1}catch(t){return void console.log("Not Available LocalStorage.")}}()&&void(this._validateMaftagUrlParam()&&(t=this._getSettingStorage())&&localStorage.setItem(this._cookieName(),JSON.stringify(t))));var t}},i={_config:{},set config(t){this._config=t},_cookieName:function(){return this._config.c_prefix+this._config.param_key},_getMafParamValue:function(){return o(this._cookieName())||a(this._cookieName())},_addMafParamUrl:function(t){var e,n=this._getMafParamValue();if(!n)return t;var i=t.match(/(.*)(?!#!)(?=#)(.*)/),i=i?(e=i[1],i[2]):(e=t,""),o=e.match(/(.*)(?=\?)(.*)/);return null!=o&&void 0!==o[2]&&o[2].match("[?&]"+this._config.param_key+"=")?t:e+(o?"&":"?")+("maf="+encodeURIComponent(n))+i},_isCrossFqdn:function(){return this._config.CROSS_FQDN&&0<this._config.CROSS_FQDN.length},_isCrossTarget:function(t){t=function(t){if(!t)return!1;t=t.match(/^https?:\/\/(.*?)([a-z0-9][a-z0-9\-]{1,61}[a-z0-9]\.[a-z.]{2,6})[:[0-9]*]?([/].*?)?$/i);return null!==t&&t[1]+t[2]}(t);return t!==document.domain&&-1!==this._config.CROSS_FQDN.indexOf(t)},_addParamMaf:function(t){var e;if("click"===t.type.toLowerCase()&&"a"===t.target.tagName.toLowerCase()){if(e=t.target.href,!this._isCrossTarget(e))return;t.target.href=this._addMafParamUrl(e)}"submit"===t.type.toLowerCase()&&"form"===t.target.tagName.toLowerCase()&&(e=t.target.action,this._isCrossTarget(e)&&(t.target.action=this._addMafParamUrl(e)))},crossDomain:function(t){this._isCrossFqdn()&&this._addParamMaf(t)}};function o(t){var e=null,t=t+"=",n=document.cookie,i=n.indexOf(t);return-1!==i&&(-1===(t=n.indexOf(";",i=i+t.length))&&(t=n.length),e=decodeURIComponent(n.substring(i,t))),e}function a(t){var e=null,n=null;try{n=localStorage.getItem(t)}catch(t){console.log("Not Available LocalStorage.")}return e=n?JSON.parse(n):e}!function(){if(window.hasOwnProperty("dataLayer"))for(var t=window.dataLayer,e=0;e<t.length;e++)if(t[e].hasOwnProperty("event")&&"gtm.dom"===t[e].event)return 1;return}()||(n.config=e,n.setMaftagCookie(),n.setMaftagStorage()),t=function(){n.config=e,n.setMaftagCookie(),n.setMaftagStorage()},document.addEventListener?document.addEventListener("DOMContentLoaded",t,!1):document.attachEvent?document.attachEvent("onreadystatechange",t):document.onreadystatechange=t,t=function(t){e.CROSS_FQDN=MAF_CROSS,i.config=e,i.crossDomain(t)},document.addEventListener?document.addEventListener("click",t,!1):document.attachEvent?document.attachEvent("onclick",t):document.onclick=t,t=function(t){e.CROSS_FQDN=MAF_CROSS,i.config=e,i.crossDomain(t)},document.addEventListener?document.addEventListener("submit",t,!1):document.attachEvent?document.attachEvent("onsubmit",t):document.onsubmit=t}();